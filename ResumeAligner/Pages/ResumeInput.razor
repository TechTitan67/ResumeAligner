@page "/resume-input"
@inject ResumeAlignerDbContext DbContext

<h3>Resume Input</h3>

<EditForm Model="@resumeModel" OnValidSubmit="HandleSubmit" FormName="ResumeForm">
    <textarea @bind="resumeModel.OriginalText" class="form-control" rows="10"></textarea>
    <ValidationMessage For="@(() => resumeModel.OriginalText)" />
    <button type="submit" class="btn btn-primary mt-2">Save Resume</button>
</EditForm>

@if (successMessage != null)
{
    <div class="alert alert-success mt-2">@successMessage</div>
}

@code {
    private Resume resumeModel = new();
    private string? successMessage;

    private async Task HandleSubmit()
    {
        resumeModel.CreatedAt = DateTime.UtcNow;
        DbContext.Resumes.Add(resumeModel);
        await DbContext.SaveChangesAsync();
        successMessage = "Resume saved successfully!";
        resumeModel = new(); // Reset form
    }
}